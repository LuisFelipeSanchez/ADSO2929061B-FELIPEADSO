<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pok√©Dex - Inicio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow-x: hidden;
      background: linear-gradient(to bottom, #0d1b2a, #1b263b);
      font-family: 'Orbitron', sans-serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
    .interface {
      text-align: center;
      color: #fff;
      animation: fadeIn 1s ease-in;
      display: none;
    }
    .interface.active {
      display: block;
    }
    #interface-1 h1, #interface-2 h1 {
      font-size: 3.5rem;
      background: linear-gradient(45deg, #ff0066, #00ffcc);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 10px #00ffcc;
      margin-bottom: 2rem;
    }
    #ash-pikachu-img {
      max-width: 60%;
      height: auto;
      margin: 0 auto;
      display: block;
      filter: drop-shadow(0 0 10px #00ffcc);
      animation: bounce 2s infinite;
    }
    #enter-btn, #back-btn {
      background: #ff3333;
      color: #fff;
      padding: 1rem 2rem;
      border-radius: 50px;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin: 0 auto;
    }
    #enter-btn:hover, #back-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px #ff3333;
    }
    #enter-btn img, #back-btn img {
      width: 48px;
      height: 48px;
    }
    #pokemon-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(100px, 1fr));
      gap: 1rem;
      padding: 2rem;
      max-height: 500px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #00ffcc #1b263b;
    }
    #pokemon-grid::-webkit-scrollbar {
      width: 8px;
    }
    #pokemon-grid::-webkit-scrollbar-track {
      background: #1b263b;
    }
    #pokemon-grid::-webkit-scrollbar-thumb {
      background: #00ffcc;
      border-radius: 4px;
    }
    .pokemon-item {
      cursor: pointer;
      padding: 0.5rem;
      border: 2px solid #00ffcc;
      border-radius: 10px;
      transition: transform 0.3s;
    }
    .pokemon-item:hover {
      transform: scale(1.1);
    }
    .pokemon-item img {
      width: 80px;
      height: 80px;
    }
    #pokemon-image {
      width: 100%;
      max-width: 400px;
      height: 400px;
      margin: 0 auto 2rem;
      display: block;
      border-radius: 1rem;
      filter: drop-shadow(0 0 10px #00ffcc);
    }
    #pokemon-details {
      padding: 1rem;
      max-width: 400px;
      margin: 0 auto;
    }
    .stat-bar-container {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 2px 0;
    }
    .stat-bar-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: #00ffcc;
      font-weight: 600;
    }
    .stat-bar {
      height: 12px;
      background-color: #2d3748;
      border-radius: 5px;
      overflow: hidden;
    }
    .stat-bar-fill {
      height: 100%;
      background: linear-gradient(45deg, #ff0066, #00ffcc);
      transition: width 0.5s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="particles-js"></div>
  <div id="interface-1" class="interface active">
    <h1>Pok√©Dex</h1>
    <img id="ash-pikachu-img" src="images/pokedex1/ash and pikachu.png" alt="Ash con Pikachu">
    <button id="enter-btn">
      <img src="images/pokedex1/pokebolagif.gif" alt="Pok√©bola"> enter
    </button>
  </div>
  <div id="interface-2" class="interface">
    <h1>Pok√©Dex</h1>
    <div id="pokemon-grid"></div>
    <button id="back-btn-2" class="mt-4">
      <img src="images/pokedex1/pokebolagif.gif" alt="Pok√©bola"> atr√°s
    </button>
  </div>
  <div id="interface-3" class="interface">
    <img id="pokemon-image" src="" alt="Pok√©mon">
    <div id="pokemon-details"></div>
    <button id="back-btn-3" class="mt-4">
      <img src="images/pokedex1/pokebolagif.gif" alt="Pok√©bola"> atr√°s
    </button>
  </div>

  <script>
    // Configurar part√≠culas
    particlesJS('particles-js', {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: '#00ffcc' },
        shape: { type: 'circle' },
        opacity: { value: 0.5, random: true },
        size: { value: 3, random: true },
        line_linked: { enable: true, distance: 150, color: '#00ffcc', opacity: 0.4, width: 1 },
        move: { enable: true, speed: 2, direction: 'none', random: false }
      },
      interactivity: {
        detect_on: 'canvas',
        events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' } },
        modes: { repulse: { distance: 100 }, push: { particles_nb: 4 } }
      }
    });

    // Mostrar/Ocultar interfaces
    function showInterface(userInterfaceId) {
      document.querySelectorAll('.interface').forEach(i => i.classList.remove('active'));
      document.getElementById(userInterfaceId).classList.add('active');
    }

    // Cargar cuadr√≠cula de Pok√©mon
    async function loadPokemonGrid() {
      const pokemonGrid = document.getElementById('pokemon-grid');
      pokemonGrid.innerHTML = '';
      const limit = 151; // Generaci√≥n 1
      for (let id = 1; id <= limit; id++) {
        try {
          const detailResponse = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
          if (!detailResponse.ok) throw new Error(`Error al cargar Pok√©mon ID ${id}`);
          const detailData = await detailResponse.json();
          const sprite = detailData.sprites.front_default || `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${id}.png`;
          const pokemonDiv = document.createElement('div');
          pokemonDiv.className = 'pokemon-item p-2 cursor-pointer rounded-lg flex justify-center';
          pokemonDiv.innerHTML = `<img src="${sprite}" alt="${detailData.name}" class="w-16 h-16">`;
          pokemonDiv.addEventListener('click', () => fetchPokemon(id));
          pokemonGrid.appendChild(pokemonDiv);
        } catch (error) {
          console.error(`Error al cargar Pok√©mon ID ${id} para la cuadr√≠cula:`, error);
        }
      }
    }

    // Obtener datos del Pok√©mon
    async function fetchPokemon(id) {
      try {
        const card = document.getElementById('pokemon-details');
        card.innerHTML = '';
        const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}`);
        if (!response.ok) throw new Error(`Pok√©mon ID ${id} no encontrado`);
        const data = await response.json();
        console.log(`Datos obtenidos para Pok√©mon ID ${id}:`, data);
        
        const typeIcons = {
          normal: '‚ö™Ô∏è', fire: 'üî•', water: 'üíß', electric: '‚ö°Ô∏è', grass: 'üåø',
          ice: '‚ùÑÔ∏è', fighting: 'ü•ä', poison: '‚ò†Ô∏è', ground: 'üåç', flying: 'üïäÔ∏è',
          psychic: 'üîÆ', bug: 'üêõ', rock: 'ü™®', ghost: 'üëª', dragon: 'üêâ',
          dark: 'üåë', steel: '‚öôÔ∏è', fairy: '‚ú®'
        };

        // Seleccionar sprite con respaldo
        let spriteUrl = data.sprites.other['official-artwork'].front_default || data.sprites.front_default;
        if (!spriteUrl) {
          console.warn(`No se encontr√≥ sprite en PokeAPI para Pok√©mon ID ${id}, usando URL de respaldo`);
          spriteUrl = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${id}.png`;
        }
        console.log(`Cargando imagen para Pok√©mon ID ${id}: ${spriteUrl}`);

        // Mostrar la imagen usando <img>
        document.getElementById('pokemon-image').src = spriteUrl;

        // Actualizar detalles con mejor espaciado
        card.innerHTML = `
          <h2 class="text-2xl font-bold text-center capitalize text-cyan-300 mb-2">${data.name}</h2>
          <p class="text-center text-gray-300 mb-2">N¬∫ ${data.id}</p>
          <p class="text-center text-gray-200 mb-4">Tipo: ${data.types.map(t => {
            const typeName = t.type.name;
            const icon = typeIcons[typeName] || '';
            return `${icon} <span style="text-transform: capitalize;">${typeName}</span>`;
          }).join(', ')}</p>
          <div class="grid grid-cols-1 gap-1 text-sm">
            ${data.stats.map(stat => `
              <div class="stat-bar-container">
                <div class="stat-bar-label">
                  <span>${stat.stat.name}</span>
                  <span>${stat.base_stat}</span>
                </div>
                <div class="stat-bar">
                  <div class="stat-bar-fill" style="width: ${(Math.min(stat.base_stat, 200) / 200) * 100}%"></div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        showInterface('interface-3');
      } catch (error) {
        console.error(`Error al obtener Pok√©mon ID ${id}:`, error);
      }
    }

    // Event listeners
    document.getElementById('enter-btn').addEventListener('click', () => {
      showInterface('interface-2');
      loadPokemonGrid();
    });

    document.getElementById('back-btn-2').addEventListener('click', () => {
      showInterface('interface-1');
      document.getElementById('pokemon-grid').innerHTML = '';
    });

    document.getElementById('back-btn-3').addEventListener('click', () => {
      showInterface('interface-2');
    });
  </script>
</body>
</html>
